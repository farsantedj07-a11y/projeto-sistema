
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extensor CP</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:Arial,Helvetica,sans-serif;
  background:linear-gradient(to bottom right,#020617,#0f172a,#020617);
  color:white;
  padding:20px;
}

.container{max-width:700px;margin:auto}

.panel{
  background:#0f172a;
  border:1px solid #334155;
  border-radius:12px;
  padding:16px;
  margin-bottom:20px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
  margin-bottom:12px;
}

button{
  border:none;
  border-radius:8px;
  padding:12px;
  font-weight:bold;
  cursor:pointer;
}

.cp-btn{background:#334155;color:white}
.ligar{background:linear-gradient(90deg,#2563eb,#06b6d4);color:white;width:100%}

.screen{
  background:black;
  border:1px solid #334155;
  border-radius:10px;
  margin-bottom:14px;
  height:180px;
  overflow:hidden;
}

iframe{
  width:100%;
  height:100%;
  border:none;
}
</style>
</head>

<body>
<div class="container">

<div class="panel">
  <div class="grid">
    <button class="cp-btn" onclick="abrirCP('CP1')">CP1</button>
    <button class="cp-btn" onclick="abrirCP('CP2')">CP2</button>
    <button class="cp-btn" onclick="abrirCP('CP3')">CP3</button>
    <button class="cp-btn" onclick="abrirCP('CP4')">CP4</button>
  </div>

  <button class="ligar" onclick="ligarTudo()">? LIGAR TODAS</button>
</div>

<div id="screens"></div>

</div>

<script>
const cps = ["CP1","CP2","CP3","CP4"];
const screensDiv = document.getElementById("screens");

/* cria telas com iframe */
function criarTela(cp){
  const div = document.createElement("div");
  div.className = "screen";
  div.innerHTML = `<iframe id="frame-${cp}"></iframe>`;
  screensDiv.appendChild(div);
}

cps.forEach(criarTela);

/* abre CP individual */
function abrirCP(cp){
  const frame = document.getElementById("frame-"+cp);
  frame.src = "./" + cp + "/index.html";
}

/* MOTOR DO EXTENSOR */
function ligarTudo(){

  // 1?? abre todas as CPs
  cps.forEach((cp,i)=>{
    setTimeout(()=>{
      abrirCP(cp);
    }, i * 300);
  });

  // 2?? sinal global de inicialização
  localStorage.setItem("EXTENSOR_ON", Date.now());

  // 3?? garante atualização contínua
  console.log("EXTENSOR ATIVO • TODAS CPs INICIADAS");
}
</script>
</body>
</html>
