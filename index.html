
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extensor CP</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:Arial,Helvetica,sans-serif;
  background:linear-gradient(to bottom right,#020617,#0f172a,#020617);
  color:white;
  padding:20px;
}

.container{max-width:700px;margin:auto}

.panel{
  background:#0f172a;
  border:1px solid #334155;
  border-radius:12px;
  padding:16px;
  margin-bottom:20px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
  margin-bottom:12px;
}

button{
  border:none;
  border-radius:8px;
  padding:12px;
  font-weight:bold;
  cursor:pointer;
}

.cp-btn{background:#334155;color:white}
.ligar{background:linear-gradient(90deg,#2563eb,#06b6d4);color:white;width:100%}

.screen{
  background:black;
  border:1px solid #334155;
  border-radius:10px;
  margin-bottom:14px;
  padding:10px;
  height:160px;
  overflow:auto;
  font-size:12px;
}

.title{
  color:#22c55e;
  margin-bottom:6px;
  font-size:11px;
}
</style>
</head>

<body>
<div class="container">

<div class="panel">
  <div class="grid">
    <button class="cp-btn" onclick="listarArquivos('CP1')">CP1</button>
    <button class="cp-btn" onclick="listarArquivos('CP2')">CP2</button>
    <button class="cp-btn" onclick="listarArquivos('CP3')">CP3</button>
    <button class="cp-btn" onclick="listarArquivos('CP4')">CP4</button>
  </div>

  <button class="ligar" onclick="carregarTudo()">? LIGAR TODAS</button>
</div>

<div id="screens"></div>

</div>

<script>
const repoBase =
"https://api.github.com/repos/farsantedj07-a11y/projeto-sistema/contents/";

const cps=["CP1","CP2","CP3","CP4"];

const screensDiv=document.getElementById("screens");

function criarTela(cp){
  const div=document.createElement("div");
  div.className="screen";
  div.id="screen-"+cp;
  div.innerHTML="<div class='title'>? "+cp+" aguardando...</div>";
  screensDiv.appendChild(div);
}

cps.forEach(criarTela);

async function listarArquivos(cp){
  const tela=document.getElementById("screen-"+cp);

  tela.innerHTML="<div class='title'>? carregando " + cp + "...</div>";

  try{
    const res=await fetch(repoBase+cp);
    const data=await res.json();

    if(!Array.isArray(data)){
      tela.innerHTML="<div class='title'>? pasta vazia ou inexistente</div>";
      return;
    }

    tela.innerHTML="<div class='title'>? " + cp + " ativo</div>";

    data.forEach(arq=>{
      const linha=document.createElement("div");
      linha.textContent=arq.name;
      tela.appendChild(linha);
    });

  }catch(e){
    tela.innerHTML="<div class='title'>? erro ao acessar GitHub</div>";
  }
}

function carregarTudo(){
  cps.forEach(cp=>listarArquivos(cp));
}

setInterval(carregarTudo,5000);
</script>
</body>
</html>
