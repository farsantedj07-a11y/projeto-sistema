
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Real HTML5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin-slow { animation: spin 3s linear infinite; }
    </style>
</head>
<body class="bg-[#0d0d0d] text-[#CCFF00] font-mono h-screen w-screen overflow-hidden m-0 p-0">

    <div id="root" class="h-full w-full flex flex-col relative">
        <div class="absolute inset-0 pointer-events-none opacity-10 z-50" 
             style="background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.3) 2px, rgba(0,0,0,0.3) 4px);">
        </div>

        <div class="flex items-center justify-between px-6 py-3 shrink-0 z-20">
            <div class="flex items-center gap-3">
                <div id="led" class="w-2 h-2 rounded-full bg-[#333] transition-all duration-300"></div>
                <span id="status-text" class="text-xs uppercase tracking-[0.3em] text-[#444]">OFF</span>
            </div>
            <div id="bt-badge" class="hidden items-center gap-2 px-3 py-1.5 bg-[#8B00FF] border border-[#8B00FF] rounded-lg">
                <i data-lucide="bluetooth" class="w-4 h-4 text-[#CCFF00]"></i>
                <span id="device-name" class="text-xs text-[#CCFF00]">CONECTADO</span>
            </div>
        </div>

        <div class="flex-1 flex flex-col px-4 pb-2 z-20">
            <div class="flex-1 bg-[#111] border-2 border-[#333] rounded-xl flex items-center justify-center p-6 overflow-hidden">
                <h2 id="mp3-display" class="text-3xl md:text-5xl lg:text-7xl font-bold tracking-wide text-[#333] text-center">---</h2>
            </div>
        </div>

        <div class="px-6 py-3 shrink-0 z-20">
            <div class="flex items-center justify-center gap-3">
                <div id="disc-container" class="opacity-30">
                    <div id="disc" class="w-14 h-14 rounded-full border-2 border-[#444] flex items-center justify-center" 
                         style="background: radial-gradient(circle at 30% 30%, #3a3a3a 0%, #1a1a1a 50%, #0a0a0a 100%)">
                        <div class="w-3 h-3 rounded-full bg-[#0a0a0a] border border-[#333] flex items-center justify-center">
                            <div id="disc-dot" class="w-1.5 h-1.5 rounded-full bg-[#333]"></div>
                        </div>
                    </div>
                </div>

                <button id="btn-bt" onclick="toggleBluetooth()" class="w-14 h-14 rounded-lg bg-[#1a1a1a] border-2 border-[#444] flex items-center justify-center transition-all duration-300 transform active:scale-95">
                    <i data-lucide="bluetooth" class="w-6 h-6 text-[#666]"></i>
                </button>

                <button onclick="document.getElementById('file-in').click()" class="w-14 h-14 rounded-lg bg-[#1a1a1a] border-2 border-[#444] flex items-center justify-center">
                    <i data-lucide="upload" class="w-6 h-6 text-[#666]"></i>
                </button>

                <button id="btn-power" onclick="togglePower()" class="w-14 h-14 rounded-lg bg-[#1a1a1a] border-2 border-[#444] flex items-center justify-center transition-all duration-300 transform active:scale-95">
                    <i data-lucide="power" class="w-6 h-6 text-[#666]"></i>
                </button>

                <button id="btn-play" class="w-14 h-14 rounded-lg bg-[#1a1a1a] border-2 border-[#444] flex items-center justify-center">
                    <i data-lucide="play" class="w-6 h-6 text-[#666]"></i>
                </button>
            </div>
        </div>

        <div class="flex-1 flex flex-col px-4 pb-4 z-20">
            <div class="flex-1 bg-[#111] border-2 border-[#333] rounded-xl flex items-center justify-center p-6 overflow-hidden">
                <h2 id="mp4-display" class="text-3xl md:text-5xl lg:text-7xl font-bold tracking-wide text-[#333] text-center">---</h2>
            </div>
        </div>

        <input type="file" id="file-in" class="hidden" accept=".mp3" multiple>
    </div>

    <script>
        // Inicializa ícones Lucide
        lucide.createIcons();

        let isOn = false;
        let isBtActive = false;

        function togglePower() {
            isOn = !isOn;
            const btn = document.getElementById('btn-power');
            const led = document.getElementById('led');
            const statusTxt = document.getElementById('status-text');
            const dMp3 = document.getElementById('mp3-display');
            const dMp4 = document.getElementById('mp4-display');
            const discDot = document.getElementById('disc-dot');

            if (isOn) {
                btn.classList.replace('bg-[#1a1a1a]', 'bg-[#CCFF00]');
                btn.innerHTML = '<i data-lucide="power" class="w-6 h-6 text-[#1a1a1a]"></i>';
                led.classList.replace('bg-[#333]', 'bg-[#CCFF00]');
                statusTxt.innerText = 'ON AIR';
                statusTxt.classList.replace('text-[#444]', 'text-[#CCFF00]');
                dMp3.innerText = 'AGUARDANDO MP3...';
                dMp3.style.color = '#CCFF00';
                dMp3.style.textShadow = '0 0 30px rgba(204,255,0,0.5)';
                dMp4.innerText = 'AGUARDANDO MP4...';
                dMp4.style.color = '#8B00FF';
                dMp4.style.textShadow = '0 0 30px rgba(139,0,255,0.5)';
                discDot.style.backgroundColor = '#CCFF00';
            } else {
                location.reload(); // Reseta para o estado original
            }
            lucide.createIcons();
        }

        // FUNÇÃO ATUALIZADA COM WEB BLUETOOTH REAL
        async function toggleBluetooth() {
            if (!isOn) return;

            if (isBtActive) {
                isBtActive = false;
                document.getElementById('btn-bt').classList.replace('bg-[#8B00FF]', 'bg-[#1a1a1a]');
                document.getElementById('bt-badge').classList.replace('flex', 'hidden');
                return;
            }

            try {
                // COMANDO REAL DO NAVEGADOR (HTML5)
                const device = await navigator.bluetooth.requestDevice({
                    acceptAllDevices: true
                });

                isBtActive = true;
                const btnBt = document.getElementById('btn-bt');
                btnBt.classList.replace('bg-[#1a1a1a]', 'bg-[#8B00FF]');
                btnBt.innerHTML = '<i data-lucide="bluetooth" class="w-6 h-6 text-[#CCFF00]"></i>';
                
                document.getElementById('bt-badge').classList.replace('hidden', 'flex');
                document.getElementById('device-name').innerText = device.name || "RADIO_DEVICE";
                
                lucide.createIcons();
            } catch (err) {
                console.log("Usuário cancelou ou navegador sem suporte HTTPS");
            }
        }
    </script>
</body>
</html>

